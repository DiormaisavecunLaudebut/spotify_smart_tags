var tracksString = "<%= @tracks %>"
var tagName = "<%= @tag_name %>"
var cardBody = document.getElementById(tagName)
var trackCards = ""
var tracks = tracksString.split('$$').map(e => e.split('**'))

function cleanZone() {
  cardBody.firstElementChild.remove();
  cardBody.classList.remove('card-body-flex');
  const cardHeader = cardBody.closest('.card').querySelector('a')
  cardHeader.href = ""
}

function appendTracks() {
  cleanZone();
  tracks.forEach(track => { trackCards += trackCard(track) })
  cardBody.insertAdjacentHTML('afterbegin', trackCards)
  listenCoverClick()
}

appendTracks();
